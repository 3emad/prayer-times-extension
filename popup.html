<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="/css/popup.css" />
  <script>
  function viewTimetable() {
    chrome.tabs.create({url: chrome.extension.getURL('timetable.html')});
  }
  </script>
</head>
<body>
  <div id="table" class="center"></div>
  <div id="footer" class="right">
    <a href="#" onclick="viewTimetable()">view timetable</a>
  </div>
  <script type="text/javascript"> 
    var bkg = chrome.extension.getBackgroundPage();
    var entity = bkg.getPrayerEntity();
    var times = entity.getTimes();
    var prayTime = entity.getPrayTime();
    var str = '<table id="timetable">';
    str += '<tr><th colspan="2">'+ entity.getDate().toLocaleDateString()+ '</th></tr>';
    for(var i = 0; i < times.length; i++) {
      str += '<tr><td>'+ prayTime.timeNames[i]+ '</td>';
      str += '<td>'+ times[i]+ '</td></tr>';
    }
    str += '</table>';
    document.getElementById('table').innerHTML = str;
  </script> 
</body>
</html>